# 📚 电报王使用文档

欢迎使用电报王！这里是详细的使用指南。

---

## 📖 文档目录

### 🚀 快速开始
- [安装指南](#安装指南)
- [首次配置](#首次配置)
- [获取API凭证](#获取api凭证)

### 📚 核心功能
- [账号管理](#账号管理)
- [群发消息](#群发消息)
- [私信发送](#私信发送)
- [批量拉人](#批量拉人)
- [AI智能聊天](#ai智能聊天)

### 🔧 高级功能
- [代理配置](#代理配置)
- [消息模板](#消息模板)
- [定时任务](#定时任务)

### ❓ 常见问题
- [故障排除](#故障排除)
- [错误代码说明](#错误代码说明)

---

## 🚀 快速开始

### 安装指南

1. **下载软件**
   - 从官方网站或Telegram频道获取最新版本
   - 解压到任意目录（建议路径不含中文）

2. **首次运行**
   - 双击运行 `Telegram-King.exe`
   - 首次运行会自动创建配置文件

3. **系统要求检查**
   - 确保系统满足最低配置要求
   - 检查网络连接是否正常

### 首次配置

#### 1. 获取Telegram API凭证

访问 https://my.telegram.org/auth 并按以下步骤操作：

1. 使用你的手机号登录
2. 点击 "API development tools"
3. 填写应用信息：
   - App title: 随意填写
   - Short name: 随意填写
   - Platform: 选择 Desktop
4. 点击创建，获得 `api_id` 和 `api_hash`

#### 2. 配置软件

1. 启动软件后，进入"设置"标签页
2. 填入获取的 `api_id` 和 `api_hash`
3. 点击"保存配置"

#### 3. 添加第一个账号

1. 进入"账号管理"标签页
2. 点击"添加账号"按钮
3. 输入手机号（带国家代码，如：+8613800138000）
4. 输入收到的验证码
5. 如有两步验证，输入密码

---

## 📚 核心功能

### 账号管理

#### 添加账号
1. 点击"添加账号"
2. 输入手机号（国际格式）
3. 输入验证码
4. 完成登录

#### 批量导入账号
1. 准备会话文件（.session格式）
2. 点击"批量导入"
3. 选择会话文件所在目录
4. 软件会自动匹配和导入

#### 账号状态监控
- **绿色**: 账号正常在线
- **黄色**: 账号空闲或未连接
- **红色**: 账号异常或被限制

#### 账号工具
- **设置头像**: 批量为账号设置头像
- **设置资料**: 修改昵称、简介等
- **登出其他设备**: 清理其他登录设备
- **修改密码**: 批量修改两步验证密码

### 群发消息

#### 群组群发

1. **准备群组列表**
   - 方式一：从"群组采集"功能获取
   - 方式二：手动输入群组链接（一行一个）
   - 方式三：导入群组ID列表

2. **编辑消息内容**
   - 输入要发送的文本
   - 支持添加图片、视频
   - 可以使用变量（如：{群组名称}）

3. **配置发送参数**
   - 发送间隔：建议60-120秒
   - 失败重试：建议开启
   - 随机延迟：建议开启

4. **开始发送**
   - 点击"开始群发"
   - 实时查看发送进度
   - 可随时暂停或停止

#### 消息模板变量

支持以下变量替换：
- `{群组名称}`: 自动替换为群组名称
- `{群组ID}`: 自动替换为群组ID
- `{时间}`: 当前时间
- `{日期}`: 当前日期

### 私信发送

#### 准备用户列表

1. **方式一：从群组导出**
   - 使用"群成员导出"功能
   - 选择目标群组
   - 导出用户列表

2. **方式二：手动导入**
   - 准备用户ID或用户名列表
   - 一行一个
   - 支持 @username 或 数字ID

#### 发送私信

1. **导入用户列表**
2. **编辑消息内容**
3. **配置发送参数**
   - 发送间隔：建议120-180秒
   - 只发送互相关注：建议开启
4. **开始发送**

### 批量拉人

#### 准备工作

1. **准备邀请账号**
   - 建议使用多个老账号
   - 确保账号在目标群组有邀请权限

2. **准备用户列表**
   - 从其他群组导出用户
   - 或手动准备用户ID列表

#### 执行拉人

1. **选择目标群组**
   - 输入群组链接或ID

2. **导入用户列表**
   - 支持CSV、TXT格式

3. **配置参数**
   - 邀请间隔：建议180-300秒
   - 每个账号邀请数：建议20-50个/天
   - 智能去重：建议开启

4. **开始邀请**
   - 多账号自动轮换
   - 实时显示成功率

### AI智能聊天

#### 配置AI后端

**方式一：使用Ollama（推荐新手）**
1. 下载并安装Ollama
2. 运行命令：`ollama run llama2`
3. 在软件中选择"Ollama"
4. 填入API地址：`http://localhost:11434`

**方式二：使用Hugging Face**
1. 需要支持CUDA的NVIDIA显卡
2. 安装AI依赖：`pip install -r ai/requirements_ai.txt`
3. 选择模型，首次运行会自动下载

**方式三：自定义API**
1. 填入你的API地址
2. 配置API密钥
3. 测试连接

#### 配置触发机制

- **问题触发**: 自动识别疑问句并回复
- **关键词触发**: 包含特定关键词时回复
- **情感触发**: 检测到强烈情绪时回复
- **随机回复**: 随机概率回复

#### 配置对话风格

- **随意风格**: 轻松自然的对话
- **幽默风格**: 带有幽默感
- **专业风格**: 正式专业
- **共情风格**: 富有同理心

#### 安全设置

- **敏感词过滤**: 自动过滤不当内容
- **黑名单**: 不回复特定用户
- **白名单**: 仅回复特定群组
- **频率限制**: 避免回复过于频繁

---

## 🔧 高级功能

### 代理配置

#### 为什么需要代理？

- 保护账号安全
- 避免IP被封
- 突破地区限制
- 提高稳定性

#### 配置方式

1. **单个代理**
   ```
   协议: SOCKS5
   地址: 127.0.0.1
   端口: 1080
   用户名: (可选)
   密码: (可选)
   ```

2. **代理池**
   - 准备多个代理
   - 一行一个，格式：`协议://地址:端口`
   - 软件会自动轮换

3. **代理测试**
   - 点击"测试代理"按钮
   - 查看连接速度和稳定性

### 消息模板

#### 创建模板

1. 进入"消息模板"管理
2. 点击"新建模板"
3. 输入模板名称和内容
4. 可以插入变量
5. 保存模板

#### 使用模板

1. 在群发或私信界面
2. 点击"选择模板"
3. 选择要使用的模板
4. 变量会自动替换

### 定时任务

#### 创建定时任务

1. 进入"定时任务"标签页
2. 点击"新建任务"
3. 选择任务类型（群发/私信/拉人）
4. 设置执行时间
5. 配置任务参数

#### 任务类型

- **单次执行**: 指定时间执行一次
- **每天执行**: 每天固定时间执行
- **周期执行**: 按小时或分钟循环

---

## ❓ 常见问题

### 故障排除

#### Q: 登录时提示"连接超时"
**A**:
1. 检查网络连接
2. 尝试配置代理
3. 更换API服务器

#### Q: 群发消息显示"限制"
**A**:
1. 降低发送频率
2. 增加发送间隔
3. 使用多个账号轮换
4. 配置代理服务器

#### Q: 账号显示红色异常状态
**A**:
1. 可能是账号被限制
2. 尝试手机端登录检查
3. 等待限制解除（通常24-48小时）
4. 避免过度使用自动化

#### Q: AI聊天不回复
**A**:
1. 检查AI服务是否运行
2. 查看触发条件是否满足
3. 检查是否在黑名单中
4. 查看日志了解详细信息

#### Q: 拉人失败率很高
**A**:
1. 检查邀请账号是否有权限
2. 用户可能已在群组
3. 用户可能设置了隐私限制
4. 降低邀请频率

### 错误代码说明

| 错误代码 | 说明 | 解决方案 |
|---------|------|---------|
| FLOOD_WAIT | 操作过于频繁 | 等待指定时间后重试 |
| USER_PRIVACY_RESTRICTED | 用户隐私设置限制 | 跳过该用户 |
| CHAT_WRITE_FORBIDDEN | 无发言权限 | 检查群组权限 |
| PEER_FLOOD | 账号被限制 | 减少操作频率 |
| AUTH_KEY_UNREGISTERED | 会话失效 | 重新登录账号 |

---

## 🆘 获取帮助

如果文档无法解决你的问题：

- 📢 加入官方Telegram频道询问
- 💬 加入技术支持群获取帮助
- 🌐 访问官网查看视频教程
- 📧 发送邮件给技术支持

---

## 🔄 文档更新

本文档会随软件版本持续更新。

**最后更新**: 2024-XX-XX

---

<div align="center">
  <sub>© 2024 电报王. 版权所有</sub>
</div>
